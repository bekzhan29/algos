# Simple game
Давайте создадим массив $ans[H]$, который будет хранить количество пересечений для горизонтальной прямой на высоте $H$. Тогда чтобы ответить на второй тип запроса надо просто вывести $ans[H]$.

Посмотрим на два соседних элемента $h[i]$ и $h[i+1]$. Без потери общности предположим что $h[i] \le h[i+1]$. Какие прямые пересекут отрезок между $(i, h[i])$ и $(i+1, h[i+1])$? Все прямые $H$, такие что $h[i] \le H \le h[i+1]$. Тогда добавим 1 на позициях от $h[i]$ до $h[i+1]$ в массиве $ans$. Сделать это можно с помощью дерева отрезков. Запросы первого типа обрабатываются похожим образом.

Время работы $O((N+M)logH)$ где $H$ максимальное значение $h[i]$.