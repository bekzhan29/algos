Segment tree beats $O(Nlog^2N)$
1. Вывести сумму на отрезке $l,r$
2. Взять по модулю на отрезке $l,r$ $a[i]$%=$x$
3. Обновление $a[i]=x$

[Видео](https://www.youtube.com/watch?v=nMabN7SrHIU) урок от [Errichto](https://codeforces.com/profile/errichto)

[Видео](https://www.youtube.com/watch?v=_TGNYtkWAsQ) урок от [SecondThread](https://codeforces.com/profile/SecondThread)