Теорема Лукаса позволяет считать $C_{N}^K$ % $P$ для больших $N$ и $K$ и маленького простого $P$.

Предпосчет $O(P)$.

Ответ на запрос $O(logN)$.

[Задача](https://www.codechef.com/problems/CHKSEL)